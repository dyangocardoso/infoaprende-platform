
> infoaprende-backend@1.0.0 test
> cross-env NODE_ENV=test mocha --recursive --exit --file test/_setup.js



  docente.middleware RBAC
Allowed CORS origins: [ 'http://localhost:5173' ]
üîç Inicializando base de datos...
‚ÑπÔ∏è  INFOAPRENDE backend importado como m√≥dulo (modo test). No se inicia el listener HTTP autom√°ticamente.
‚úÖ Base de datos y modelos inicializados correctamente
    ‚úî debe rechazar acceso si no est√° autenticado
Allowed CORS origins: [ 'http://localhost:5173' ]
üîç Inicializando base de datos...
‚ÑπÔ∏è  INFOAPRENDE backend importado como m√≥dulo (modo test). No se inicia el listener HTTP autom√°ticamente.
‚úÖ Base de datos y modelos inicializados correctamente
    ‚úî debe rechazar acceso si el rol no es docente
Allowed CORS origins: [ 'http://localhost:5173' ]
üîç Inicializando base de datos...
‚ÑπÔ∏è  INFOAPRENDE backend importado como m√≥dulo (modo test). No se inicia el listener HTTP autom√°ticamente.
‚úÖ Base de datos y modelos inicializados correctamente
    ‚úî debe permitir acceso para usuarios con rol docente

  Integraci√≥n RBAC en preview (solo docente)
Allowed CORS origins: [ 'http://localhost:5173' ]
üîç Inicializando base de datos...
‚ÑπÔ∏è  INFOAPRENDE backend importado como m√≥dulo (modo test). No se inicia el listener HTTP autom√°ticamente.
‚úÖ Base de datos y modelos inicializados correctamente
Allowed CORS origins: [ 'http://localhost:5173' ]
üîç Inicializando base de datos...
‚ÑπÔ∏è  INFOAPRENDE backend importado como m√≥dulo (modo test). No se inicia el listener HTTP autom√°ticamente.
‚úÖ Base de datos y modelos inicializados correctamente
    ‚úî debe devolver 403 cuando el usuario no es docente
Allowed CORS origins: [ 'http://localhost:5173' ]
üîç Inicializando base de datos...
‚ÑπÔ∏è  INFOAPRENDE backend importado como m√≥dulo (modo test). No se inicia el listener HTTP autom√°ticamente.
‚úÖ Base de datos y modelos inicializados correctamente
Allowed CORS origins: [ 'http://localhost:5173' ]
üîç Inicializando base de datos...
‚ÑπÔ∏è  INFOAPRENDE backend importado como m√≥dulo (modo test). No se inicia el listener HTTP autom√°ticamente.
‚úÖ Base de datos y modelos inicializados correctamente
    ‚úî debe permitir acceso cuando el usuario es docente (control r√°pido)

  GET /api/docente/plantillas/:id/preview (con sinon stubs)
Allowed CORS origins: [ 'http://localhost:5173' ]
üîç Inicializando base de datos...
‚ÑπÔ∏è  INFOAPRENDE backend importado como m√≥dulo (modo test). No se inicia el listener HTTP autom√°ticamente.
‚úÖ Base de datos y modelos inicializados correctamente
    ‚úî debe devolver HTML con status 200 sin necesidad de token/BD
Allowed CORS origins: [ 'http://localhost:5173' ]
üîç Inicializando base de datos...
‚ÑπÔ∏è  INFOAPRENDE backend importado como m√≥dulo (modo test). No se inicia el listener HTTP autom√°ticamente.
‚úÖ Base de datos y modelos inicializados correctamente
    ‚úî debe devolver 404 si la plantilla no existe (sin error de autenticaci√≥n)


  7 passing (1s)

